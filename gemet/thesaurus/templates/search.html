{% extends layout_template %}
{% load gemet_tags %}

{% block title %}
Search thesaurus
{% endblock %}

{% block content %}
  {% include 'header.html' with view='search' page=1 query=query %}
  {% if query %}
    <div>
      <span class="results-nr">{{ paginator.count }} results found.</span>
      <span>Searched for '<b>{{ query }}</b>'</span>
    </div>
    {% if concepts|length %}
    <hr>
    <ul class="listing columns {% if language.rtl %}direction-rtl{% endif %}">
      {% for concept in concepts %}
        <li>
            {% get_concept_names concept.search_text as names %}
            <a href="{% url 'concept' language.code concept.concept__code %}">{{ names.concept_name }}</a>
            <p class="no-margin-top small">
              {% if names.other_names %}
                <span class="muted">other names:</span>
                <span class="py-other-names">{{ names.other_names }}</span>&ensp;
              {% endif %}

              {% get_broader_context concept.id language.code status_values as broader_context %}
              {% if broader_context %}
                <span class="muted">broader context:</span>
                <span class="py-broader">{{ broader_context }}</span>
              {% else %}
                <span class="muted">top level concept</span>
              {% endif %}
            </p>
        </li>
      {% endfor %}
    </ul>
    {% endif %}
  {% else %}
    {% if form.errors %}
      <div>
        <span>{{ form.errors.query }}</span>
      </div>
    {% else %}
      <div>
        <span>Nothing to search for.</span>
      </div>
    {% endif %}
  {% endif %}

<div class="pagination">
    <span class="step-links">
        {% if concepts.has_previous %}
            <a href="{% url 'search' language.code concepts.previous_page_number %}?query={{ query }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ concepts.number }} of {{ concepts.paginator.num_pages }}
        </span>

        {% if concepts.has_next %}
            <a href="{% url 'search' language.code concepts.next_page_number %}?query={{ query }}">next</a>
        {% endif %}
    </span>
</div>
{% endblock %}

{% block version %}
  {% include 'version.html' %}
{% endblock %}
