{% extends layout_template %}
{% load gemet_tags %}

{% block title %}
Search thesaurus
{% endblock %}

{% block content %}
  {% include 'header.html' with view='search' %}

  {% if query %}
    <div>
      <span class="results-nr">{{ concepts|length }} results found.</span>
      <span>Searched for '<b>{{ query }}</b>'</span>
    </div>
    {% if concepts|length %}
    <hr>
    <ul class="listing columns {% if language.rtl %}direction-rtl{% endif %}">
      {% for concept in concepts %}
        <li>
            {% get_concept_names concept.search_text as names %}
            <a href="{% url 'concept' language.code concept.concept__code %}">{{ names.concept_name }}</a>
            <p class="no-margin-top small">
              {% if names.other_names %}
                <span class="muted">other names:</span>
                <span class="py-other-names">{{ names.other_names }}</span>&ensp;
              {% endif %}

              {% get_broader_context concept.id language.code as broader_context %}
              {% if broader_context %}
                <span class="muted">broader context:</span>
                <span class="py-broader">{{ broader_context }}</span>
              {% else %}
                <span class="muted">top level concept</span>
              {% endif %}
            </p>
        </li>
      {% endfor %}
    </ul>
    {% endif %}
  {% else %}
    {% if form.errors %}
      <div>
        <span>{{ form.errors.query }}</span>
      </div>
    {% else %}
      <div>
        <span>Nothing to search for.</span>
      </div>
    {% endif %}
  {% endif %}

{% endblock %}

{% block version %}
  {% include 'version.html' %}
{% endblock %}
